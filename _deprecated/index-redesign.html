<!DOCTYPE html>
<html class="light" lang="fr">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta name="description" content="Demande de Visa e-Visa - Ambassade de Côte d'Ivoire">
    <title>Côte d'Ivoire e-Visa | Service Officiel</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23F77F00' width='33' height='100'/%3E%3Crect fill='%23FFFFFF' x='33' width='34' height='100'/%3E%3Crect fill='%23009A44' x='67' width='33' height='100'/%3E%3C/svg%3E">

    <!-- Google Fonts - Professional Typography -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect" />
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap"
        rel="stylesheet" />

    <!-- Material Symbols Outlined (style prototype) -->
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- Theme Configuration -->
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": {
                            DEFAULT: "#0D5C46",  // Deep forest green
                            light: "#10816A",
                            dark: "#094536",
                        },
                        "accent": {
                            orange: "#F77F00",   // CI Orange
                            green: "#009A44",    // CI Green
                        },
                        "surface": {
                            light: "#FFFFFF",
                            dark: "#1A1A2E",
                        },
                        "bg": {
                            light: "#FAFAFA",
                            dark: "#0F0F1A",
                        },
                        "text": {
                            primary: "#1A1A2E",
                            secondary: "#6B7280",
                        },
                        "border": "#E5E7EB",
                        "success": "#059669",
                        "warning": "#D97706",
                        "error": "#DC2626",
                    },
                    fontFamily: {
                        "display": ["Playfair Display", "Georgia", "serif"],
                        "body": ["DM Sans", "system-ui", "sans-serif"]
                    },
                    borderRadius: {
                        "xl": "0.75rem",
                        "2xl": "1rem",
                        "3xl": "1.25rem",
                    },
                    boxShadow: {
                        'card': '0 1px 3px rgba(0,0,0,0.08)',
                        'card-hover': '0 4px 12px rgba(0,0,0,0.1)',
                        'button': '0 2px 4px rgba(13,92,70,0.2)',
                    },
                },
            },
        }
    </script>

    <style>
        /* Custom scrollbar */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .scrollbar-thin::-webkit-scrollbar {
            width: 4px;
        }

        .scrollbar-thin::-webkit-scrollbar-track {
            background: #F3F4F6;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #D1D5DB;
            border-radius: 4px;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: #9CA3AF;
        }

        /* Clean Card Panel - No glass effect */
        .card-panel {
            background: #FFFFFF;
            border: 1px solid #E5E7EB;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
        }

        .dark .card-panel {
            background: #1E293B;
            border: 1px solid #334155;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        /* Clean Input */
        .clean-input {
            background: #FFFFFF;
            border: 1px solid #E5E7EB;
            transition: all 0.2s ease;
        }

        .clean-input:focus {
            border-color: #0D5C46;
            box-shadow: 0 0 0 3px rgba(13, 92, 70, 0.1);
        }

        .dark .clean-input {
            background: #1E293B;
            border: 1px solid #334155;
            color: white;
        }

        .dark .clean-input:focus {
            border-color: #10816A;
            box-shadow: 0 0 0 3px rgba(16, 129, 106, 0.2);
        }

        /* Material Symbols */
        .material-symbols-outlined {
            font-family: 'Material Symbols Rounded';
            font-weight: normal;
            font-style: normal;
            font-size: 24px;
            line-height: 1;
            letter-spacing: normal;
            text-transform: none;
            display: inline-block;
            white-space: nowrap;
            word-wrap: normal;
            direction: ltr;
            -webkit-font-feature-settings: 'liga';
            -webkit-font-smoothing: antialiased;
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        .material-symbols-outlined.filled {
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        /* Clean Background */
        .bg-clean {
            background-color: #FAFAFA;
        }

        .dark .bg-clean {
            background-color: #0F172A;
        }

        /* Animations */
        @keyframes slideUpFade {
            from {
                opacity: 0;
                transform: translateY(12px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-enter {
            animation: slideUpFade 0.3s ease-out forwards;
        }

        /* Message Bubbles - Clean design */
        .msg-bubble-bot {
            border-radius: 12px;
            border-bottom-left-radius: 4px;
            background: #FFFFFF;
            border: 1px solid #E5E7EB;
        }

        .dark .msg-bubble-bot {
            background: #1E293B;
            border: 1px solid #334155;
        }

        .msg-bubble-user {
            border-radius: 12px;
            border-bottom-right-radius: 4px;
            background: #0D5C46;
            color: white;
        }

        /* Typing Indicator */
        .typing-dot {
            width: 6px;
            height: 6px;
            background: #0D5C46;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .dark .typing-dot {
            background: #10816A;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-4px);
            }
        }

        /* Primary Button - Solid, professional */
        .btn-primary {
            background: #0D5C46;
            color: white;
            transition: all 0.2s ease;
        }

        .btn-primary:hover {
            background: #094536;
            box-shadow: 0 2px 8px rgba(13, 92, 70, 0.25);
        }

        .btn-primary:active {
            transform: translateY(1px);
        }

        /* Secondary Button */
        .btn-secondary {
            background: #F3F4F6;
            color: #1A1A2E;
            border: 1px solid #E5E7EB;
            transition: all 0.2s ease;
        }

        .btn-secondary:hover {
            background: #E5E7EB;
            border-color: #D1D5DB;
        }

        .dark .btn-secondary {
            background: #334155;
            color: #F1F5F9;
            border-color: #475569;
        }

        /* Upload Zone */
        .upload-zone {
            border: 2px dashed #D1D5DB;
            background: #FAFAFA;
            transition: all 0.2s ease;
        }

        .upload-zone:hover,
        .upload-zone.drag-over {
            border-color: #0D5C46;
            background: rgba(13, 92, 70, 0.02);
        }

        .dark .upload-zone {
            border-color: #475569;
            background: #1E293B;
        }

        /* Progress bar */
        .progress-fill {
            background: #0D5C46;
        }

        /* Accent colors for status */
        .status-active {
            color: #0D5C46;
        }

        .status-pending {
            color: #9CA3AF;
        }

        .status-complete {
            color: #059669;
        }

        /* National flag accent bar */
        .flag-accent {
            height: 3px;
            background: linear-gradient(to right, #F77F00 33%, #FFFFFF 33%, #FFFFFF 67%, #009A44 67%);
        }

        /* Glass Panel - Glassmorphism effect for modals */
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .dark .glass-panel {
            background: rgba(30, 41, 59, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        /* Premium Button - Gradient style */
        .btn-premium {
            background: linear-gradient(135deg, #0D5C46 0%, #10816A 100%);
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .btn-premium:hover:not(:disabled) {
            background: linear-gradient(135deg, #094536 0%, #0D5C46 100%);
            transform: translateY(-1px);
        }

        .btn-premium:active:not(:disabled) {
            transform: translateY(0);
        }

        .btn-premium:disabled {
            background: #9CA3AF;
            cursor: not-allowed;
        }

        .dark .btn-premium {
            background: linear-gradient(135deg, #10816A 0%, #14B88A 100%);
        }

        .dark .btn-premium:hover:not(:disabled) {
            background: linear-gradient(135deg, #0D5C46 0%, #10816A 100%);
        }

        /* Shadow Glow - Glowing effect for buttons */
        .shadow-glow {
            box-shadow: 0 4px 14px rgba(13, 92, 70, 0.4);
        }

        .shadow-glow:hover {
            box-shadow: 0 6px 20px rgba(13, 92, 70, 0.5);
        }

        .dark .shadow-glow {
            box-shadow: 0 4px 14px rgba(16, 129, 106, 0.4);
        }

        .dark .shadow-glow:hover {
            box-shadow: 0 6px 20px rgba(16, 129, 106, 0.5);
        }
    </style>
</head>

<body class="bg-clean font-body text-gray-800 dark:text-gray-100 min-h-screen">
    <!-- National Flag Accent Bar -->
    <div class="flag-accent w-full"></div>

    <div id="app" class="relative flex min-h-screen w-full flex-col overflow-y-auto">

        <!-- ===== HEADER ===== -->
        <header
            class="flex items-center justify-between whitespace-nowrap px-6 lg:px-12 py-4 z-30 shrink-0 border-b border-gray-100 dark:border-gray-800 bg-white dark:bg-surface-dark">
            <div class="flex items-center gap-4">
                <!-- CI Flag Icon -->
                <div class="size-10 rounded-lg bg-primary flex items-center justify-center text-white">
                    <span class="material-symbols-outlined text-[22px]">verified_user</span>
                </div>
                <div class="flex flex-col">
                    <h1 class="font-display text-lg font-semibold text-gray-900 dark:text-white leading-tight">
                        Côte d'Ivoire
                    </h1>
                    <p class="text-xs font-medium text-primary">
                        Portail e-Visa Officiel
                    </p>
                </div>
            </div>

            <div class="flex gap-2 items-center">
                <!-- Action Buttons -->
                <div
                    class="flex items-center gap-1 p-1 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
                    <!-- Language Toggle -->
                    <button id="lang-toggle"
                        class="rounded-md px-3 py-2 text-sm font-medium hover:bg-white dark:hover:bg-gray-700 transition-colors">
                        <span id="lang-label">FR</span>
                    </button>

                    <!-- Dark Mode Toggle -->
                    <button id="theme-toggle"
                        class="rounded-md px-3 py-2 flex items-center justify-center hover:bg-white dark:hover:bg-gray-700 transition-colors text-gray-600 dark:text-gray-300">
                        <span class="material-symbols-outlined text-[18px]" id="theme-icon">dark_mode</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- ===== MAIN CONTENT ===== -->
        <main class="flex-1 flex justify-center p-4 lg:p-6 lg:pb-10 overflow-y-auto">
            <div class="w-full max-w-[1400px] grid grid-cols-1 lg:grid-cols-12 gap-8">

                <!-- ===== LEFT COLUMN: Hero & Progress ===== -->
                <div id="hero-section"
                    class="hidden lg:flex lg:col-span-4 flex-col justify-center gap-6 py-6 animate-enter">

                    <!-- Hero Text -->
                    <div class="space-y-4">
                        <div
                            class="inline-flex items-center gap-2 rounded-md bg-primary/10 px-3 py-1.5 text-primary text-sm font-medium">
                            <span class="block size-2 rounded-full bg-primary"></span>
                            Ambassade à Addis-Abeba
                        </div>

                        <h2 class="font-display text-4xl font-semibold leading-tight text-gray-900 dark:text-white">
                            Demande de Visa<br />
                            <span class="text-primary">Simplifiée</span>
                        </h2>

                        <p class="text-base text-gray-600 dark:text-gray-400 leading-relaxed">
                            Notre assistant vous guide étape par étape et vérifie vos documents en temps réel.
                        </p>
                    </div>

                    <!-- Progress Card -->
                    <div class="card-panel rounded-xl p-5">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="text-xs font-medium text-gray-500 uppercase tracking-wide mb-1">
                                    Progression</h3>
                                <p class="text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2">
                                    En cours
                                    <span class="size-2 rounded-full bg-primary"></span>
                                </p>
                            </div>
                            <div class="text-right">
                                <span id="progress-percent" class="text-2xl font-bold text-primary">0%</span>
                            </div>
                        </div>

                        <!-- Progress Bar -->
                        <div class="h-1.5 w-full bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden mb-6">
                            <div id="progress-bar" class="h-full progress-fill rounded-full" style="width: 0%;"></div>
                        </div>

                        <!-- Timeline -->
                        <div id="step-timeline" class="space-y-3 max-h-[200px] overflow-y-auto pr-2 scrollbar-thin">
                            <!-- Steps rendered by JS -->
                        </div>
                    </div>
                </div>

                <!-- ===== RIGHT COLUMN: Chat Interface ===== -->
                <div class="lg:col-span-8 flex flex-col">
                    <div class="card-panel flex flex-col rounded-2xl overflow-visible">

                        <!-- Mobile Header -->
                        <div
                            class="lg:hidden p-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between bg-white dark:bg-surface-dark">
                            <div class="flex items-center gap-3">
                                <div class="size-10 rounded-lg bg-primary flex items-center justify-center text-white">
                                    <span class="material-symbols-outlined text-xl">smart_toy</span>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-sm text-gray-900 dark:text-white">Assistant Visa</h3>
                                    <div class="flex items-center gap-2">
                                        <span id="mobile-step" class="text-xs text-primary font-medium">Étape 1/9</span>
                                        <div class="w-16 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                            <div id="mobile-progress-bar" class="h-full bg-primary rounded-full transition-all duration-300" style="width: 0%;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Mobile Actions -->
                            <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                <span class="material-symbols-outlined text-gray-600 dark:text-gray-400">more_vert</span>
                            </button>
                        </div>

                        <!-- Chat Area -->
                        <div id="chat-messages"
                            class="flex-1 overflow-y-auto p-4 sm:p-5 lg:p-6 space-y-4 scrollbar-thin bg-gray-50 dark:bg-gray-900/50">
                            <!-- Dynamic Messages -->
                        </div>

                        <!-- Action Area (Input/Buttons) -->
                        <div id="action-area"
                            class="p-4 bg-white dark:bg-surface-dark border-t border-gray-100 dark:border-gray-700">
                            <!-- Dynamic Controls -->
                        </div>
                    </div>
                </div>
            </div>
    </div>
    </main>
    </div>

    <!-- ===== MODALS ===== -->

    <!-- Upload Modal (Glassmorphism) -->
    <div id="upload-modal"
        class="fixed inset-0 bg-gray-900/60 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4 transition-opacity duration-300">
        <div class="glass-panel w-full max-w-lg rounded-3xl p-6 sm:p-8 shadow-2xl relative animate-enter">

            <button id="close-upload-modal"
                class="absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100/50 dark:hover:bg-white/10 transition-colors text-gray-500">
                <span class="material-symbols-outlined">close</span>
            </button>

            <div class="text-center mb-8">
                <div
                    class="size-16 rounded-2xl bg-primary/10 flex items-center justify-center mx-auto mb-4 text-primary">
                    <span class="material-symbols-outlined text-3xl">cloud_upload</span>
                </div>
                <h3 id="upload-modal-title" class="text-2xl font-display font-bold text-gray-900 dark:text-white mb-2">
                    Importer Document
                </h3>
                <p class="text-gray-500 dark:text-gray-400 text-sm">
                    JPG, PNG ou PDF acceptés (Max 5MB)
                </p>
            </div>

            <!-- Drop Zone -->
            <div id="drop-zone"
                class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-2xl p-8 mb-6 text-center hover:border-primary hover:bg-primary/5 transition-all cursor-pointer relative group">
                <input type="file" id="file-input" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"
                    accept="image/*,.pdf" />
                <div class="group-hover:scale-105 transition-transform duration-300 pointer-events-none">
                    <span
                        class="material-symbols-outlined text-4xl text-gray-400 group-hover:text-primary mb-3 block">folder_open</span>
                    <p class="text-sm font-medium text-gray-600 dark:text-gray-300">
                        Glissez votre fichier ici ou <span class="text-primary underline">cliquez pour parcourir</span>
                    </p>
                </div>
            </div>

            <!-- Preview & Processing Handled by JS appending here -->
            <div id="upload-preview"
                class="hidden mb-6 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 relative group">
                <img id="preview-image" src="" alt="Aperçu"
                    class="w-full h-48 object-contain bg-gray-50 dark:bg-gray-800" />
                <button id="clear-preview"
                    class="absolute top-2 right-2 size-8 bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center backdrop-blur-md transition-all opacity-0 group-hover:opacity-100">
                    <span class="material-symbols-outlined text-sm">close</span>
                </button>
            </div>

            <div id="upload-processing" class="hidden flex flex-col items-center justify-center py-6">
                <div class="size-10 border-4 border-primary/30 border-t-primary rounded-full animate-spin mb-3"></div>
                <p class="text-sm font-medium text-primary">Analyse intelligente en cours...</p>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <button id="webcam-btn"
                    class="py-3.5 px-6 rounded-xl border border-gray-200 dark:border-gray-700/50 font-bold text-sm hover:bg-gray-50 dark:hover:bg-white/5 transition-all flex items-center justify-center gap-2 text-gray-700 dark:text-gray-200">
                    <span class="material-symbols-outlined">photo_camera</span>
                    Webcam
                </button>
                <button id="confirm-upload-btn"
                    class="btn-premium py-3.5 px-6 rounded-xl font-bold text-sm text-white shadow-glow disabled:opacity-50 disabled:shadow-none transition-all flex items-center justify-center gap-2"
                    disabled>
                    <span class="material-symbols-outlined">check</span>
                    Confirmer
                </button>
            </div>
        </div>
    </div>

    <!-- Passport Confirm Modal -->
    <div id="passport-confirm-modal"
        class="fixed inset-0 bg-gray-900/60 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="glass-panel w-full max-w-2xl rounded-[2rem] p-0 shadow-2xl relative animate-enter overflow-hidden">
            <!-- Content Injected -->
        </div>
    </div>

    <!-- Notifications -->
    <div id="notification-container" class="fixed top-24 right-6 z-[100] flex flex-col gap-3 pointer-events-none"></div>

    <!-- QR Code Library for Mobile Capture -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <script>
        // Adapter QRCode pour la compatibilité
        window.QRCode = function(element, options) {
            const qr = qrcode(0, 'M');
            qr.addData(typeof options === 'string' ? options : options.text);
            qr.make();
            const size = options.width || 128;
            element.innerHTML = qr.createSvgTag({ scalable: true, margin: 2 });
            const svg = element.querySelector('svg');
            if (svg) {
                svg.setAttribute('width', size);
                svg.setAttribute('height', size);
            }
        };
        QRCode.CorrectLevel = { L: 'L', M: 'M', Q: 'Q', H: 'H' };
    </script>
    
    <!-- Innovatrics DOT Document Capture -->
    <script type="module" src="assets/innovatrics/index.umd.js"></script>
    <script type="module" src="assets/innovatrics/document.umd.js"></script>
    
    <!-- Camera Capture Modules -->
    <script src="js/innovatrics-camera.js"></script>
    <script src="js/chatbot-redesign.js"></script>
</body>

</html>